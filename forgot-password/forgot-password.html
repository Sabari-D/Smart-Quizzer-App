<!-- <div class="login-container">
    <div class="login-card">
        <h2 class="title">Request Password Reset</h2>
        
        <form class="login-form" (ngSubmit)="onRequestReset()" #resetForm="ngForm">
            
            <p *ngIf="message" class="success-message">{{ message }}</p>
            <p *ngIf="errorMessage" class="error-message">{{ errorMessage }}</p>

            <div class="input-group">
                <label for="identifier">Username or Email</label>
                <input 
                    type="text" 
                    id="identifier" 
                    name="identifier" 
                    placeholder="Enter your username" 
                    [(ngModel)]="usernameOrEmail" 
                    required>
            </div>
            
            <p class="note">A reset link will be sent for verification.</p>
            
            <button 
                type="submit" 
                class="action-btn login-btn"
                [disabled]="loading || resetForm.invalid">
                <span *ngIf="!loading">Send Reset Link</span>
                <span *ngIf="loading">Processing Request...</span>
            </button>
            
        </form>
        
        <a class="back-link" (click)="goBack()">Go Back to Login</a>
    </div>
</div> -->




<div class="forgot-password-container">
    <div class="forgot-password-card">
        <div class="card-header">
            <button class="back-button" (click)="goBack()" [disabled]="loading">
                <i class="icon-arrow-left"></i>
            </button>
            <h2>Forgot Password</h2>
        </div>

        <div class="card-body">
            
            <div *ngIf="success && !showOtpInput" class="alert alert-success">
                <i class="icon-check-circle"></i>
                <p>{{ message }}</p>
            </div>
            
            <div *ngIf="resetLinkDisplayed && success" class="reset-link-display">
                <p class="link-label">Your reset link (for testing):</p>
                <div class="link-box">
                    <span>{{ resetLinkDisplayed }}</span>
                    <button type="button" class="copy-btn" (click)="copyResetLink()">Copy</button>
                </div>
                <p class="info-message">Link generated for testing. Valid for 1 hour.</p>
            </div>
            <div *ngIf="errorMessage" class="alert alert-error">
                <i class="icon-alert-circle"></i>
                <p>{{ errorMessage }}</p>
            </div>

            <div *ngIf="!showOtpInput && !success">
                <div class="info-text">
                    <p>Enter your email address or mobile number to receive a password reset verification.</p>
                </div>

                <div class="method-toggle">
                    <button 
                        class="toggle-btn" 
                        [class.active]="resetMethod === 'email'"
                        (click)="resetMethod = 'email'; identifier = ''"
                        [disabled]="loading">
                        <i class="icon-mail"></i> Email
                    </button>
                    <button 
                        class="toggle-btn" 
                        [class.active]="resetMethod === 'mobile'"
                        (click)="resetMethod = 'mobile'; identifier = ''"
                        [disabled]="loading">
                        <i class="icon-phone"></i> Mobile
                    </button>
                </div>

                <form (ngSubmit)="onRequestReset()" #identifierForm="ngForm"> 
                    <div class="form-group">
                        <label [attr.for]="'identifier-input'">
                            {{ resetMethod === 'email' ? 'Email Address' : 'Mobile Number' }}
                        </label>
                        <div class="input-wrapper">
                            <i [class]="resetMethod === 'email' ? 'icon-mail' : 'icon-phone'"></i>
                            <input
                                id="identifier-input"
                                [type]="resetMethod === 'email' ? 'email' : 'tel'"
                                [(ngModel)]="identifier"
                                name="identifier"
                                (input)="onIdentifierChange()"
                                [placeholder]="resetMethod === 'email' ? 'your@email.com' : '9876543210'"
                                [maxlength]="resetMethod === 'mobile' ? 10 : 100"
                                [disabled]="loading"
                                class="form-input"
                                required
                            />
                        </div>
                        <small class="input-hint">
                            {{ resetMethod === 'email' 
                                ? 'We\'ll send a reset link to your email' 
                                : 'We\'ll send a 6-digit OTP to your mobile' }}
                        </small>
                    </div>

                    <button 
                        class="btn btn-primary btn-block"
                        type="submit"
                        [disabled]="loading || identifierForm.invalid">
                        <span *ngIf="!loading">
                            <i class="icon-send"></i>
                            Send {{ resetMethod === 'email' ? 'Reset Link' : 'OTP' }}
                        </span>
                        <span *ngIf="loading" class="loading-spinner">
                            <i class="icon-loader"></i> Sending...
                        </span>
                    </button>
                </form> </div>

            <div *ngIf="showOtpInput && !success">
                <div class="info-text">
                    <p><strong>OTP sent to:</strong> {{ identifier.substring(0, 2) }}******{{ identifier.substring(8) }}</p>
                    <p class="text-sm">Enter the 6-digit code to continue</p>
                </div>
                
                <form (ngSubmit)="onVerifyOtp()" #otpForm="ngForm"> <div class="form-group">
                        <label for="otp-input">Enter OTP</label>
                        <div class="input-wrapper">
                            <i class="icon-key"></i>
                            <input
                                id="otp-input"
                                name="otp-input"
                                type="text"
                                [(ngModel)]="otpCode"
                                placeholder="000000"
                                maxlength="6"
                                pattern="[0-9]*"
                                inputmode="numeric"
                                [disabled]="loading"
                                class="form-input otp-input"
                                required
                            />
                        </div>
                    </div>

                    <button 
                        class="btn btn-primary btn-block"
                        type="submit"
                        [disabled]="loading || otpCode.length !== 6">
                        <span *ngIf="!loading">
                            <i class="icon-check"></i> Verify OTP
                        </span>
                        <span *ngIf="loading" class="loading-spinner">
                            <i class="icon-loader"></i> Verifying...
                        </span>
                    </button>
                </form> <div class="resend-section">
                    <p *ngIf="!canResendOtp" class="text-muted">
                        Resend OTP in <strong>{{ resendTimer }}s</strong>
                    </p>
                    <button 
                        *ngIf="canResendOtp"
                        class="btn btn-link"
                        (click)="onResendOtp()">
                        <i class="icon-refresh"></i> Resend OTP
                    </button>
                </div>
            </div>

            <div class="divider" *ngIf="!success">
                <span>OR</span>
            </div>
            <div class="footer-links">
                <p class="text-center">
                    Remember your password?
                    <a (click)="goToLogin()" class="link-primary">Sign In</a>
                </p>
            </div>
        </div>
    </div>
</div>